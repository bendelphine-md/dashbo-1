<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maryland Project Dashboard - Jan 5 Design</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --card-bg: #f8f9fa; /* Light gray background for cards as seen in image */
            --text-dark: #1a202c;
            --text-light: #718096;
            
            /* Project Colors */
            --col-procurement: #a0aec0; /* Gray */
            --col-implementation: #2c5282; /* Dark Blue */
            --col-om: #bee3f8; /* Light Blue */
            
            --col-forecast: #fbba00; /* Yellow */
            --col-actual: #2c5282; /* Dark Blue */
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 40px;
            background-color: #fff;
            color: var(--text-dark);
        }

        /* --- Selector (Top Right Floating) --- */
        .selector-container {
            position: absolute;
            top: 20px;
            right: 40px;
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: 5px 10px;
            border-radius: 4px;
            z-index: 100;
        }
        select {
            border: none;
            font-size: 14px;
            outline: none;
            cursor: pointer;
            min-width: 200px;
        }

        /* --- Header Section --- */
        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 60px;
            padding-bottom: 20px;
        }

        .header-left {
            max-width: 50%;
        }

        .proj-id {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .proj-name {
            font-size: 36px;
            font-weight: 800;
            line-height: 1.1;
            color: var(--text-dark);
            margin: 0;
        }

        .header-right {
            display: flex;
            gap: 80px;
            margin-top: 10px; /* Align slightly with title */
        }

        .header-metric h3 {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-light);
            text-transform: uppercase;
            margin: 0 0 5px 0;
            letter-spacing: 0.5px;
        }

        .header-metric p {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
            color: var(--text-dark);
        }

        /* --- Main Grid Layout --- */
        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr; /* Left Summary, Right Visuals */
            gap: 60px;
        }

        /* Left Column: Summary */
        .summary-col h3 {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-light);
            text-transform: uppercase;
            margin: 0 0 15px 0;
            letter-spacing: 0.5px;
        }

        .summary-text {
            font-size: 16px;
            line-height: 1.6;
            color: #2d3748;
            margin-bottom: 30px;
        }

        .summary-note {
            font-style: italic;
            color: var(--text-light);
            font-size: 14px;
            border-top: 1px solid #e2e8f0;
            padding-top: 15px;
        }

        /* Right Column: Visual Cards */
        .visuals-col {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 4px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin: 0 0 30px 0;
            color: var(--text-dark);
        }

        /* --- Timeline Card --- */
        .gantt-container {
            margin-bottom: 40px;
        }

        .timeline-years {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 10px;
            padding: 0 2%; 
        }

        .timeline-track-wrapper {
            position: relative;
            height: 50px;
        }
        
        /* Vertical grid lines (simulated) */
        .grid-lines {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
            z-index: 0;
            padding: 0 2%;
        }
        .grid-line {
            width: 1px;
            height: 100%;
            border-left: 1px dashed #cbd5e0;
        }

        .timeline-track {
            position: relative;
            height: 100%;
            width: 100%;
            z-index: 1;
            display: flex;
            align-items: center;
        }

        .phase-bar {
            height: 40px; /* Thicker bars */
            position: absolute;
            top: 5px;
        }

        .timeline-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #4a5568;
        }
        .legend-box {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        /* Timeline Metrics (Bottom of card) */
        .timeline-metrics {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
        }

        .t-metric-val {
            font-size: 24px;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }
        .t-metric-lbl {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-light);
        }

        /* --- Finance Card --- */
        .finance-layout {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 40px;
            align-items: center;
        }

        .eac-container {
            text-align: center;
        }
        .eac-val {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 5px;
        }
        .eac-lbl {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-light);
            line-height: 1.3;
        }

        .chart-container {
            height: 180px;
            position: relative;
            width: 100%;
        }

        /* Custom Legend for Chart */
        .chart-legend-custom {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 10px;
            margin-left: 20px;
        }
    </style>
</head>
<body>

    <div class="selector-container">
        <select id="projectSelect" onchange="renderProject(this.value)"></select>
    </div>

    <div class="header-section">
        <div class="header-left">
            <div class="proj-id" id="headId">COMP-16-ITS</div>
            <h1 class="proj-name" id="headName">Integrated Tax System</h1>
        </div>
        <div class="header-right">
            <div class="header-metric">
                <h3>Accountable Agency</h3>
                <p id="headAgency">Comptroller of Maryland</p>
            </div>
            <div class="header-metric">
                <h3>Project Phase</h3>
                <p id="headPhase">Implementation</p>
            </div>
        </div>
    </div>

    <div class="main-grid">
        
        <div class="summary-col">
            <h3>Project Summary</h3>
            <div class="summary-text" id="projSummary">
                Loading...
            </div>
            <div class="summary-note">
                Note: This is a summary, contact accountable agency for detailed information.
            </div>
        </div>

        <div class="visuals-col">

            <div class="card">
                <h2 class="card-title">Current schedule</h2>
                
                <div class="gantt-container">
                    <div class="timeline-years">
                        <span>2016</span><span>2018</span><span>2020</span><span>2022</span><span>2024</span><span>2026</span><span>2028</span><span>2030</span>
                    </div>
                    
                    <div class="timeline-track-wrapper">
                        <div class="grid-lines">
                            <div class="grid-line"></div><div class="grid-line"></div><div class="grid-line"></div>
                            <div class="grid-line"></div><div class="grid-line"></div><div class="grid-line"></div>
                            <div class="grid-line"></div><div class="grid-line"></div>
                        </div>
                        <div class="timeline-track" id="timelineTrack">
                            </div>
                    </div>

                    <div class="timeline-legend">
                        <div class="legend-item">
                            <div class="legend-box" style="background:var(--col-procurement)"></div> Procurement
                        </div>
                        <div class="legend-item">
                            <div class="legend-box" style="background:var(--col-implementation)"></div> Implementation
                        </div>
                        <div class="legend-item">
                            <div class="legend-box" style="background:var(--col-om)"></div> Operations & Maintenance
                        </div>
                    </div>
                </div>

                <div class="timeline-metrics">
                    <div>
                        <span class="t-metric-val" id="metricLength">-</span>
                        <span class="t-metric-lbl">Estimated Project Length</span>
                    </div>
                    <div>
                        <span class="t-metric-val" id="metricRemaining">-</span>
                        <span class="t-metric-lbl">Estimated Time Remaining</span>
                    </div>
                    <div>
                        <span class="t-metric-val" id="metricEndYear">-</span>
                        <span class="t-metric-lbl">Estimated End Year</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">Amount Spent</h2>
                <div class="finance-layout">
                    <div class="eac-container">
                        <div class="eac-val" id="eacValue">$75M - $80M</div>
                        <div class="eac-lbl">Project<br>Estimate-at-<br>Completion</div>
                    </div>
                    
                    <div style="display:flex; align-items:center; width:100%;">
                        <div class="chart-container">
                            <canvas id="financeChart"></canvas>
                        </div>
                        <div class="chart-legend-custom">
                            <div class="legend-item">
                                <div class="legend-box" style="background:var(--col-forecast)"></div> Forecasted Spend
                            </div>
                            <div class="legend-item">
                                <div class="legend-box" style="background:var(--col-actual)"></div> Actual Spend
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

<script>
    // --- Data Source ---
    const projectsData = [
    {
        "MITDP ID": "DBM-23-CBIS",
        "Name": "Capital Budgeting Information System (CBIS) replacement",
        "Agency": "Department of Budget and Management",
        "Phase": "O&M",
        "Project Length": "3 - 5 years",
        "Start Year": 2022,
        "End Year": 2027,
        "Project Time Remaining": "0 to 1 years",
        "Procurement Start": "7/1/2022", "Procurement End": "5/1/2024",
        "Implementation Start": "5/2/2024", "Implementation End": "12/31/2025",
        "O&M Start": "1/1/2026", "O&M End": "3/31/2027",
        "EAC": "$0M - $10M",
        "FY25 Forecasted Spend": 1639972.54,
        "FY25 Actual Spend": 1627244,
        "Project Summary": "This project, an extension of the State’s Budget Analysis and Reporting System (BARS), is focused on modernizing the management of capital projects and programs. It will replace the existing CBIS, eliminate manual processes, and introduce advanced capabilities such as facility planning and geospatial integration. The new solution will be fully integrated with BARS and the Financial Management Information System (FMIS) to ensure consistency across budgeting and accounting processes."
    },
    {
        "MITDP ID": "COMP-22-PSM",
        "Name": "CPB Payroll System Modernization (PSM)",
        "Agency": "Comptroller of Maryland",
        "Phase": "Implementation",
        "Project Length": "5 - 7 years",
        "Start Year": 2021,
        "End Year": 2028,
        "Project Time Remaining": "0 to 2 years",
        "Procurement Start": "7/1/2021", "Procurement End": "8/30/2024",
        "Implementation Start": "8/31/2024", "Implementation End": "7/1/2026",
        "O&M Start": "7/2/2026", "O&M End": "9/30/2027",
        "EAC": "$40M - $50M",
        "FY25 Forecasted Spend": 17780793.58,
        "FY25 Actual Spend": 16593911,
        "Project Summary": "A statewide project by the Central Payroll Bureau to replace the legacy mainframe payroll system with a modern, cloud-based Software as a Service (SaaS) solution. This transformation is designed to streamline and automate outdated payroll processes while introducing standardized industry best practices to strengthen efficiency, accuracy, and compliance. The new scalable system will serve over 100,000 employees across all branches of the State of Maryland."
    },
    {
        "MITDP ID": "MDH-23-OPER",
        "Name": "OPER - Systems Integration and Modernization",
        "Agency": "Maryland Department of Health",
        "Phase": "Implementation",
        "Project Length": "4 - 6 years",
        "Start Year": 2022,
        "End Year": 2028,
        "Project Time Remaining": "0 to 2 years",
        "Procurement Start": "10/3/2022", "Procurement End": "9/30/2025",
        "Implementation Start": "10/1/2025", "Implementation End": "9/30/2026",
        "O&M Start": "10/1/2026", "O&M End": "12/31/2027",
        "EAC": "$0M - $10M",
        "FY25 Forecasted Spend": 4204.68,
        "FY25 Actual Spend": 4205,
        "Project Summary": "A Maryland Department of Health (MDH) initiative to modernize licensing, compliance, and workforce regulatory functions led by the Office of Controlled Substances Administration. The project aims to enhance healthcare delivery and streamline regulatory oversight by replacing outdated manual processes with a unified, cloud-based system accessible to the public. Key benefits include strengthened data security, real-time reporting, disaster recovery, and improved efficiency."
    },
    {
        "MITDP ID": "MDH-25-MMT_DASO",
        "Name": "MMT - Dental Administrative Services (DASO)",
        "Agency": "Maryland Department of Health",
        "Phase": "O&M",
        "Project Length": "8 - 10 years",
        "Start Year": 2018,
        "End Year": 2028,
        "Project Time Remaining": "0 to 2 years",
        "Procurement Start": "7/1/2018", "Procurement End": "2/3/2025",
        "Implementation Start": "2/4/2025", "Implementation End": "12/31/2025",
        "O&M Start": "1/1/2026", "O&M End": "3/31/2027",
        "EAC": "$30M - $40M",
        "FY25 Forecasted Spend": 2114690.32,
        "FY25 Actual Spend": 1682960,
        "Project Summary": "A Maryland Department of Health (MDH) initiative under the Medicaid Enterprise Systems Modular Transformation (MMT) to improve access to dental care for Medicaid members and ensure prompt reimbursement for providers by establishing a new Dental Administrative Services Organization (DASO). The project's dual objectives are to increase annual utilization of preventive and restorative dental services by at least one percent each year, and to develop and operate a robust claims processing system."
    },
    {
        "MITDP ID": "MDL-22-LOCCS",
        "Name": "LABOR Omni-channel Contact Center System (LOCCS)",
        "Agency": "Department of Labor",
        "Phase": "Implementation",
        "Project Length": "5 - 7 years",
        "Start Year": 2021,
        "End Year": 2028,
        "Project Time Remaining": "0 to 2 years",
        "Procurement Start": "7/1/2021", "Procurement End": "12/14/2024",
        "Implementation Start": "12/15/2024", "Implementation End": "6/30/2026",
        "O&M Start": "7/1/2026", "O&M End": "6/30/2027",
        "EAC": "$10M - $20M",
        "FY25 Forecasted Spend": 635516.31,
        "FY25 Actual Spend": 0,
        "Project Summary": "A multi-phase initiative by the Maryland Department of Labor's Unemployment Insurance division to modernize and centralize contact center operations. It replaces the temporary, outsourced COVID-era call center with a State-managed, cloud-based Software as a Service (SaaS) solution. LOCCS provides omni-channel capabilities, including voice, chat, email, and self-service IVR. The solution is designed to improve customer service, streamline case handling, reduce duplicate data entry."
    },
    {
        "MITDP ID": "STO-18-FSM",
        "Name": "Financial Systems Modernization",
        "Agency": "State Treasurer's Office",
        "Phase": "Implementation",
        "Project Length": "9 - 11 years",
        "Start Year": 2017,
        "End Year": 2028,
        "Project Time Remaining": "0 to 2 years",
        "Procurement Start": "7/1/2017", "Procurement End": "9/1/2018",
        "Implementation Start": "9/2/2018", "Implementation End": "6/30/2026",
        "O&M Start": "7/1/2026", "O&M End": "6/30/2027",
        "EAC": "$30M - $40M",
        "FY25 Forecasted Spend": 5560323.28,
        "FY25 Actual Spend": 6398733,
        "Project Summary": "A strategic initiative to transition the State Treasurer’s Office (STO) from its aging IBM AS400/i5 Treasury and Insurance Management System to a modern, cloud-based Microsoft enterprise resource planning (ERP) financial and insurance management solution. This modernization is essential to ensuring the continuity and enhancement of the Treasurer’s Office mission-critical functions, which include funds disbursement, daily cash flow management, reconciliation, ACH/wire transfers, and investment of State funds."
    },
    {
        "MITDP ID": "DGS-18-EMM",
        "Name": "Maryland Marketplace (eMMA) eProcurement Solution",
        "Agency": "Department of General Services",
        "Phase": "Implementation",
        "Project Length": "10 - 12 years",
        "Start Year": 2017,
        "End Year": 2029,
        "Project Time Remaining": "1 to 3 years",
        "Procurement Start": "7/1/2017", "Procurement End": "2/1/2019",
        "Implementation Start": "1/7/2020", "Implementation End": "12/31/2027",
        "O&M Start": "1/1/2028", "O&M End": "12/31/2028",
        "EAC": "$70M - $80M",
        "FY25 Forecasted Spend": 3239585.29,
        "FY25 Actual Spend": 2771967,
        "Project Summary": "This project is modernizing the State of Maryland’s enterprise procurement platform to standardize how State agencies manage solicitations, contracts, and vendor interactions. Following an internal assessment and an Executive Order, the eMMA platform is enhancing its capabilities with strategic sourcing, catalog management, advanced reporting, and improved compliance for small and minority-owned businesses."
    },
    {
        "MITDP ID": "MDH-16-EHR",
        "Name": "Statewide Electronic Health Records (EHR) system",
        "Agency": "Maryland Department of Health",
        "Phase": "Implementation",
        "Project Length": "6 - 8 years",
        "Start Year": 2021,
        "End Year": 2029,
        "Project Time Remaining": "1 to 3 years",
        "Procurement Start": "8/6/2021", "Procurement End": "10/1/2023",
        "Implementation Start": "10/2/2023", "Implementation End": "12/31/2026",
        "O&M Start": "1/1/2027", "O&M End": "3/31/2028",
        "EAC": "$30M - $40M",
        "FY25 Forecasted Spend": 6276198.99,
        "FY25 Actual Spend": 5852884,
        "Project Summary": "A Maryland Department of Health (MDH) initiative to replace the legacy Health Management Information System with a commercially available, cloud-based Software as a Service (SaaS) solution. The system will support health and revenue-cycle operations across eleven State-run treatment centers, including eight behavioral health facilities and three hospitals. It will streamline patient admission, discharge, and transfer, and manage functions like revenue cycle and clinical documentation."
    }
    ];

    let myChart = null;

    // Initialize logic
    window.onload = function() {
        populateSelector();
        initChart();
        renderProject(1); // Default to Payroll to show good data
    };

    function populateSelector() {
        const sel = document.getElementById('projectSelect');
        projectsData.forEach((p, idx) => {
            const opt = document.createElement('option');
            opt.value = idx;
            opt.text = p.Name;
            sel.appendChild(opt);
        });
    }

    function initChart() {
        const ctx = document.getElementById('financeChart').getContext('2d');
        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['FY25 Forecast', 'FY25 Actual'],
                datasets: [{
                    data: [0, 0],
                    backgroundColor: ['#fbba00', '#2c5282'], // Yellow, Blue
                    borderRadius: 2,
                    barPercentage: 0.6,
                    categoryPercentage: 0.8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let val = context.parsed.y;
                                if(val >= 1000000) return '$' + (val/1000000).toFixed(2) + 'M';
                                return '$' + val.toLocaleString();
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#e2e8f0',
                            borderDash: [5, 5]
                        },
                        ticks: {
                            callback: function(val) {
                                return '$' + (val/1000000).toFixed(0) + 'M';
                            },
                            font: { size: 10 }
                        },
                        border: { display: false }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { display: false }, // Hiding X labels as we have legend
                        border: { display: false }
                    }
                }
            }
        });
    }

    function renderProject(index) {
        const p = projectsData[index];

        // 1. Header
        document.getElementById('headId').innerText = p["MITDP ID"];
        document.getElementById('headName').innerText = p.Name;
        document.getElementById('headAgency').innerText = p.Agency;
        document.getElementById('headPhase').innerText = p.Phase;

        // 2. Summary
        document.getElementById('projSummary').innerText = p["Project Summary"];

        // 3. Schedule Metrics
        document.getElementById('metricLength').innerText = p["Project Length"];
        document.getElementById('metricRemaining').innerText = p["Project Time Remaining"];
        document.getElementById('metricEndYear').innerText = p["End Year"];

        // 4. Draw Gantt
        drawGantt(p);

        // 5. Finance
        document.getElementById('eacValue').innerText = p.EAC;
        myChart.data.datasets[0].data = [
            p["FY25 Forecasted Spend"],
            p["FY25 Actual Spend"]
        ];
        myChart.update();
    }

    function drawGantt(p) {
        const track = document.getElementById('timelineTrack');
        track.innerHTML = '';

        // Fixed range: 2016 to 2030 (14 years)
        const minYear = 2016;
        const maxYear = 2030;
        const span = maxYear - minYear;

        const phases = [
            { s: p["Procurement Start"], e: p["Procurement End"], c: 'var(--col-procurement)' },
            { s: p["Implementation Start"], e: p["Implementation End"], c: 'var(--col-implementation)' },
            { s: p["O&M Start"], e: p["O&M End"], c: 'var(--col-om)' }
        ];

        phases.forEach(ph => {
            if(!ph.s || !ph.e) return;
            const startD = new Date(ph.s);
            const endD = new Date(ph.e);
            
            const startVal = startD.getFullYear() + startD.getMonth()/12;
            const endVal = endD.getFullYear() + endD.getMonth()/12;

            let leftPct = ((startVal - minYear) / span) * 100;
            let widthPct = ((endVal - startVal) / span) * 100;

            // Bounds check visual
            if(leftPct < 0) { widthPct += leftPct; leftPct = 0; }
            if(widthPct < 0) return;

            const bar = document.createElement('div');
            bar.className = 'phase-bar';
            bar.style.left = leftPct + '%';
            bar.style.width = widthPct + '%';
            bar.style.backgroundColor = ph.c;
            track.appendChild(bar);
        });
    }

</script>
</body>
</html>