<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MITDP Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #1a365d;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .header-section {
            margin-bottom: 30px;
        }

        .dropdown-container {
            margin: 20px 0;
        }

        label {
            font-weight: 600;
            color: #2d3748;
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
        }

        select {
            width: 100%;
            max-width: 500px;
            padding: 12px 15px;
            font-size: 16px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            background-color: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        select:hover {
            border-color: #4299e1;
        }

        select:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        .project-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .project-title {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .project-id {
            font-size: 14px;
            opacity: 0.9;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
        }

        .info-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .info-value {
            font-size: 18px;
            color: #2d3748;
            font-weight: 600;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-green {
            background-color: #c6f6d5;
            color: #22543d;
        }

        .status-yellow {
            background-color: #fef5e7;
            color: #744210;
        }

        .status-red {
            background-color: #fed7d7;
            color: #742a2a;
        }

        .phase-timeline {
            margin: 30px 0;
            padding: 25px;
            background: #edf2f7;
            border-radius: 8px;
        }

        .timeline-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .timeline-phases {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .phase-item {
            flex: 1;
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .phase-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .phase-dates {
            font-size: 12px;
            color: #718096;
        }

        .financial-section {
            margin: 30px 0;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .financial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .financial-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .financial-label {
            font-size: 12px;
            color: #718096;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .financial-amount {
            font-size: 24px;
            color: #2d3748;
            font-weight: 700;
        }

        .oversight-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        .oversight-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .oversight-label {
            font-size: 12px;
            color: #718096;
            margin-bottom: 8px;
        }

        .oversight-value {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background-color: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            transition: width 0.5s ease;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background-color: #4a5568;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        td {
            font-size: 13px;
            color: #2d3748;
        }

        tr:hover {
            background-color: #f7fafc;
        }

        .boolean-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-weight: bold;
            font-size: 12px;
        }

        .true-indicator {
            background-color: #48bb78;
            color: white;
        }

        .false-indicator {
            background-color: #e2e8f0;
            color: #718096;
        }

        .loading-message {
            text-align: center;
            padding: 40px;
            color: #718096;
            font-size: 18px;
        }

        .error-message {
            background-color: #fed7d7;
            color: #742a2a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #fc8181;
        }

        @media (max-width: 768px) {
            .info-grid, .financial-grid {
                grid-template-columns: 1fr;
            }

            .timeline-phases {
                flex-direction: column;
            }

            .oversight-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-section">
            <h1>MITDP Project Dashboard</h1>
            <p style="color: #718096; margin-top: 5px;">Maryland Information Technology Development Projects</p>
        </div>

        <div id="loadingMessage" class="loading-message">
            Loading project data...
        </div>

        <div id="errorMessage" style="display: none;"></div>

        <div id="dropdownSection" style="display: none;">
            <div class="dropdown-container">
                <label for="projectSelect">Select Project:</label>
                <select id="projectSelect" onchange="loadProjectData()">
                    <option value="">-- Choose a Project --</option>
                </select>
            </div>
        </div>

        <div id="dashboardContent" style="display: none;">
            <!-- Project Header -->
            <div class="project-header">
                <div class="project-title" id="projectName"></div>
                <div class="project-id" id="projectId"></div>
            </div>

            <!-- Key Information Grid -->
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-label">Agency</div>
                    <div class="info-value" id="agency"></div>
                </div>
                <div class="info-card">
                    <div class="info-label">Phase</div>
                    <div class="info-value" id="phase"></div>
                </div>
                <div class="info-card">
                    <div class="info-label">Oversight Status</div>
                    <div class="info-value" id="oversightStatus"></div>
                </div>
                <div class="info-card">
                    <div class="info-label">Statutory Requirement</div>
                    <div class="info-value" id="statutoryReq"></div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div>
                <label style="margin-bottom: 10px; display: block;">Project Completion:</label>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">0%</div>
                </div>
            </div>

            <!-- Timeline Section -->
            <div class="phase-timeline">
                <div class="timeline-title">Project Timeline</div>
                <div class="timeline-phases">
                    <div class="phase-item">
                        <div class="phase-name">Procurement</div>
                        <div class="phase-dates">
                            <strong>Original:</strong> <span id="procureOriginal"></span><br>
                            <strong>Current:</strong> <span id="procureCurrent"></span><br>
                            <strong>Actual:</strong> <span id="procureActual"></span>
                        </div>
                    </div>
                    <div class="phase-item">
                        <div class="phase-name">Implementation</div>
                        <div class="phase-dates">
                            <strong>Original:</strong> <span id="implOriginal"></span><br>
                            <strong>Current:</strong> <span id="implCurrent"></span><br>
                            <strong>Actual:</strong> <span id="implActual"></span>
                        </div>
                    </div>
                    <div class="phase-item">
                        <div class="phase-name">O&M</div>
                        <div class="phase-dates">
                            <strong>Original:</strong> <span id="omOriginal"></span><br>
                            <strong>Current:</strong> <span id="omCurrent"></span><br>
                            <strong>Actual:</strong> <span id="omActual"></span>
                        </div>
                    </div>
                </div>
                <div class="info-grid" style="margin-top: 20px;">
                    <div class="info-card">
                        <div class="info-label">Project Length</div>
                        <div class="info-value" id="projectLength"></div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Time Remaining</div>
                        <div class="info-value" id="timeRemaining"></div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">End Year</div>
                        <div class="info-value" id="endYear"></div>
                    </div>
                </div>
            </div>

            <!-- Financial Section -->
            <div class="financial-section">
                <div class="section-title">Financial Information</div>
                <div class="financial-grid">
                    <div class="financial-card">
                        <div class="financial-label">EAC (Estimate at Completion)</div>
                        <div class="financial-amount" id="eac"></div>
                    </div>
                    <div class="financial-card">
                        <div class="financial-label">EAC Remaining</div>
                        <div class="financial-amount" id="eacRemaining"></div>
                    </div>
                    <div class="financial-card">
                        <div class="financial-label">FY25 Funding</div>
                        <div class="financial-amount" id="fy25Funding"></div>
                    </div>
                    <div class="financial-card">
                        <div class="financial-label">FY25 Total Spend</div>
                        <div class="financial-amount" id="fy25Spend"></div>
                    </div>
                    <div class="financial-card">
                        <div class="financial-label">FY26 Funding</div>
                        <div class="financial-amount" id="fy26Funding"></div>
                    </div>
                    <div class="financial-card">
                        <div class="financial-label">Total Spend through FY24</div>
                        <div class="financial-amount" id="totalSpendFY24"></div>
                    </div>
                </div>
            </div>

            <!-- Oversight Section -->
            <div class="financial-section">
                <div class="section-title">Oversight & Support</div>
                <div class="oversight-section">
                    <div class="oversight-item">
                        <div class="oversight-label">Deployed Team</div>
                        <div class="oversight-value" id="deployedTeam"></div>
                    </div>
                    <div class="oversight-item">
                        <div class="oversight-label">Deep Dive Team</div>
                        <div class="oversight-value" id="deepDiveTeam"></div>
                    </div>
                    <div class="oversight-item">
                        <div class="oversight-label">IV&V</div>
                        <div class="oversight-value" id="ivv"></div>
                    </div>
                </div>
            </div>

            <!-- Detailed Financial Table -->
            <div class="financial-section">
                <div class="section-title">Detailed Budget Breakdown</div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Fiscal Year</th>
                                <th>Funding</th>
                                <th>Initial Spend Plan</th>
                                <th>Current Spend Plan</th>
                                <th>Total Spend</th>
                                <th>OII Spend</th>
                            </tr>
                        </thead>
                        <tbody id="financialTable">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let projectsData = [];

        // Load JSON data from file
        async function loadJSON() {
            try {
                const response = await fetch('dashboard-data.json');

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                projectsData = await response.json();

                // Hide loading message
                document.getElementById('loadingMessage').style.display = 'none';

                // Show dropdown section
                document.getElementById('dropdownSection').style.display = 'block';

                // Populate the dropdown
                populateDropdown();

            } catch (error) {
                console.error('Error loading JSON data:', error);
                document.getElementById('loadingMessage').style.display = 'none';

                const errorDiv = document.getElementById('errorMessage');
                errorDiv.style.display = 'block';
                errorDiv.className = 'error-message';
                errorDiv.innerHTML = `
                    <strong>Error Loading Data</strong><br>
                    Could not load dashboard-data.json. Please ensure:<br>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>The file 'dashboard-data.json' exists in the same directory as this HTML file</li>
                        <li>You're running this on a web server (not directly opening the file)</li>
                        <li>The JSON file is properly formatted</li>
                    </ul>
                    <p style="margin-top: 10px;"><em>Error details: ${error.message}</em></p>
                `;
            }
        }

        function populateDropdown() {
            const select = document.getElementById('projectSelect');

            // Clear existing options except the first one
            select.innerHTML = '<option value="">-- Choose a Project --</option>';

            projectsData.forEach((project, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${project["MITDP ID"]} - ${project.Name}`;
                select.appendChild(option);
            });
        }

        function loadProjectData() {
            const selectIndex = document.getElementById('projectSelect').value;
            if (selectIndex === '') {
                document.getElementById('dashboardContent').style.display = 'none';
                return;
            }

            const project = projectsData[selectIndex];
            document.getElementById('dashboardContent').style.display = 'block';

            // Populate header
            document.getElementById('projectName').textContent = project.Name;
            document.getElementById('projectId').textContent = `Project ID: ${project["MITDP ID"]}`;

            // Populate key info
            document.getElementById('agency').textContent = project.Agency;
            document.getElementById('phase').textContent = project.Phase;

            // Status badge
            const statusElement = document.getElementById('oversightStatus');
            const status = project["Oversight Status"].toLowerCase();
            statusElement.innerHTML = `<span class="status-badge status-${status}">${project["Oversight Status"]}</span>`;

            document.getElementById('statutoryReq').textContent = project["Statutory Requirement"];

            // Progress bar
            const progressPercent = project["Time Percent Complete"];
            document.getElementById('progressBar').style.width = progressPercent;
            document.getElementById('progressBar').textContent = progressPercent;

            // Timeline
            document.getElementById('procureOriginal').textContent =
                `${project["Procurement Start - Original"]} - ${project["Procurement End - Original"]}`;
            document.getElementById('procureCurrent').textContent =
                `${project["Procurement Start - Current"]} - ${project["Procurement End - Current"]}`;
            document.getElementById('procureActual').textContent =
                `${project["Procurement Start - Actual"]} - ${project["Procurement End - Actual"]}`;

            document.getElementById('implOriginal').textContent =
                `${project["Implementation Start - Original"]} - ${project["Implementation End - Original"]}`;
            document.getElementById('implCurrent').textContent =
                `${project["Implementation Start - Current"]} - ${project["Implementation End - Current"]}`;
            document.getElementById('implActual').textContent =
                `${project["Implementation Start - Actual"]} - ${project["Implementation End - Actual"]}`;

            document.getElementById('omOriginal').textContent =
                `${project["O&M Start - Original"]} - ${project["O&M End - Original"]}`;
            document.getElementById('omCurrent').textContent =
                `${project["O&M Start - Current"]} - ${project["O&M End - Current"]}`;
            document.getElementById('omActual').textContent =
                `${project["O&M Start - Actual"]} - ${project["O&M End - Actual"]}`;

            document.getElementById('projectLength').textContent = project["Project Length"];
            document.getElementById('timeRemaining').textContent = `${project["Project Time Remaining"]} years`;
            document.getElementById('endYear').textContent = project["End Year"];

            // Financial data
            document.getElementById('eac').textContent = project.EAC;
            document.getElementById('eacRemaining').textContent = project["EAC Remaining"];
            document.getElementById('fy25Funding').textContent = formatCurrency(project["FY25 Project Funding"]);
            document.getElementById('fy25Spend').textContent = formatCurrency(project["FY25 Total Project Spend"]);
            document.getElementById('fy26Funding').textContent = formatCurrency(project["FY26 Project Funding"]);
            document.getElementById('totalSpendFY24').textContent = project["Total Project Spend through FY24"];

            // Oversight
            document.getElementById('deployedTeam').innerHTML = getBooleanIndicator(project["Deployed Team"]);
            document.getElementById('deepDiveTeam').innerHTML = getBooleanIndicator(project["Deep Dive Team"]);
            document.getElementById('ivv').innerHTML = getBooleanIndicator(project["IV&V"]);

            // Financial table
            const tableBody = document.getElementById('financialTable');
            tableBody.innerHTML = `
                <tr>
                    <td><strong>FY24 (Through)</strong></td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${project["Total Project Spend through FY24"]}</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td><strong>FY25</strong></td>
                    <td>${formatCurrency(project["FY25 Project Funding"])}</td>
                    <td>${formatCurrency(project["FY25 Project Initial Spend Plan"])}</td>
                    <td>${formatCurrency(project["FY25 Project Current Spend Plan"])}</td>
                    <td>${formatCurrency(project["FY25 Total Project Spend"])}</td>
                    <td>${formatCurrency(project["FY25 OII Total Spend"])}</td>
                </tr>
                <tr>
                    <td><strong>FY26</strong></td>
                    <td>${formatCurrency(project["FY26 Project Funding"])}</td>
                    <td>${formatCurrency(project["FY26 Project Initial Spend Plan"])}</td>
                    <td>${formatCurrency(project["FY26 Project Current Spend Plan"])}</td>
                    <td>${formatCurrency(project["FY26 Total Project Spend"])}</td>
                    <td>${formatCurrency(project["FY26 OII Total Spend"])}</td>
                </tr>
            `;

            // Scroll to top of dashboard content
            document.getElementById('dashboardContent').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function formatCurrency(value) {
            if (typeof value === 'string' && value.startsWith('$')) {
                return value;
            }
            const num = parseFloat(value);
            if (isNaN(num)) return value;
            return '$' + num.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
        }

        function getBooleanIndicator(value) {
            const isTrue = value === "TRUE" || value === true;
            const indicatorClass = isTrue ? 'true-indicator' : 'false-indicator';
            const text = isTrue ? '✓' : '✗';
            return `<span class="boolean-indicator ${indicatorClass}">${text}</span>`;
        }

        // Initialize on page load
        window.onload = loadJSON;
    </script>
</body>
</html>
